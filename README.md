# Pwrake

Parallel workflow extension for Rake
* Author: Masahiro Tanaka

TODO: Write a gem description

## Features

* Parallelize all tasks; no need to modify Rakefile, no need to use `multitask`.
* Tasks are executed in the given number of worker threads.
* Remote exuecution using SSH.
* Locality-aware node-selection for Gfarm file system.

## Installation

Download source tgz/zip and expand, cd to subdir and install:

    $ ruby setup.rb

Or, gem install:

    $ gem install pwrake

## Usage

### Parallel execution using 4 cores at localhost:

    $ pwrake -j 4

### Parallel execution using all cores at localhost:

    $ pwrake -j

### Parallel execution using total 2*2 cores at remote 2 hosts:

1. Share your directory among remote hosts via distributed file system such as NFS, Gfarm.
2. Allow passphrase-less access via SSH in either way:
   * Add passphrase-less key generated by `ssh-keygen`.  (Be careful)
   * Add passphrase using `ssh-add`.
3. Make `hosts` file in which remote host names and the number of cores are listed:

        $ cat hosts
        host1 2
        host2 2

4. Run `pwrake` with an option `--hostfile` or `-F`:

        $ pwrake --hostfile=hosts

## Workflow demo

## Contributing

1. Fork it
2. Create your feature branch (`git checkout -b my-new-feature`)
3. Commit your changes (`git commit -am 'Add some feature'`)
4. Push to the branch (`git push origin my-new-feature`)
5. Create new Pull Request
